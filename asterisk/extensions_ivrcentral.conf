;=====DIALPLAN===========
[macro-anexost]
;exten => s, ,Playback(you-entered)
exten => s,1,saynumber(${MACRO_EXTEN})
exten => s,n,Set(anexo=${MACRO_EXTEN})
exten => s,n,Set(nombre=${ODBC_AnexoNom(${anexo})})
exten => s,n,Festival(sera transferido con. ${nombre})
exten => s,n,Set(FILE_NAME=${MACRO_EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => s,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => s,n,system(mkdir /home/monitor/anexos/personales/${mes}/${calltime})
exten => s,n,MixMonitor(/home/monitor/anexos/personales/${mes}/${calltime}/${FILE_NAME}.gsm,b)
;exten => s,n,Dial(SIP/${EXTEN},50,tT)
exten => s,n,Dial(${ARG1},50,Tt)
exten => s,n,Goto(s-${DIALSTATUS},1)
exten => s-BUSY,1,Ringing()
exten => s-BUSY,n,Wait(1)
exten => s-BUSY,n,Voicemail(${MACRO_EXTEN},bs)
exten => s-BUSY,n,Hangup
exten => s-NOANSWER,1,Voicemail(${MACRO_EXTEN},us)
exten => s-NOANSWER,n,Hangup
exten => _s.,1,Ringing()
exten => _s.,n,Wait(1)
exten => _s.,n,Voicemail(${MACRO_EXTEN},us)
exten => _s.,n,Busy(2)

[KIA]
exten => s,1,Set(TIMEOUT(digit)=2)
exten => s,n,Background(skberge/bienbenida-kia)
exten => s,n,Wait(1)
exten => s,n,Set(TIMEOUT(response)=5)
exten => s,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => s,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => s,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-kia/${mes}/${calltime})
exten => s,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-kia/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => s,n,SetMusicOnHold(atc-kia)
exten => s,n,Set(CALLERID(num)=${CALLERID(num)}-ATC-Kia)
exten => s,n,Goto(KIA,s,1)
exten => i,1,Playback(pbx-invalid)
exten => i,n,Goto(KIA,s,1)
exten => t,1,Playback(vm-goodbye)
exten => t,n,Hangup()

exten => 1,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-cqskia,6307210,1)
exten => 1,n,GotoIfTime(17:02-23:59,mon-fri,*,*?horarioatencion-cqskia,6307210,1)
exten => 1,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-cqskia,6307210,1)
exten => 1,n,Set(FILE_NAME=${EXTEN}-6307210-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 1,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 1,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/CQS-KIA/${mes}/${calltime})
exten => 1,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/CQS-KIA/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 1,n,SetMusicOnHold(atc-kia)
exten => 1,n,Set(CALLERID(num)=${CALLERID(num)}-CQSKIA)
exten => 1,n,Dial(SIP/4025&SIP/4026,30,Ttr)
exten => 1,n,Hangup

exten => 2,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-atckia,6307210,1)
exten => 2,n,GotoIfTime(17:02-23:59,mon-fri,*,*?horarioatencion-atckia,6307210,1)
exten => 2,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-atckia,6307210,1)
exten => 2,n,Set(FILE_NAME=${EXTEN}-6307210-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 2,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 2,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-kia/${mes}/${calltime})
exten => 2,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-kia/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 2,n,SetMusicOnHold(atc-kia)
exten => 2,n,Set(CALLERID(num)=${CALLERID(num)}-ATC-Kia)
exten => 2,n,Dial(SIP/4022&SIP/4018,30,Ttr)
exten => 2,n,Hangup

exten => 3,1,Festival()
exten => 3,n, Hangup

[FIAT]
exten => s,1,Wait(1)
exten => s,n,Set(TIMEOUT(digit)=2)
exten => s,n,Background(skberge/bienvenida-fiat)
exten => s,n,Wait(1)
exten => s,n,Set(TIMEOUT(response)=5)
exten => s,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => s,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => s,n,Set(CALLERID(num)=${CALLERID(num)}--ATC-Fiat)
exten => s,n,Goto(FIAT,s,1)
exten => i,1,Playback(pbx-invalid)
exten => i,n,Goto(FIAT,s,1)
exten => t,1,Playback(vm-goodbye)
exten => t,n,Hangup()

exten => 1,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-cqsfiat,6307220,1)
exten => 1,n,GotoIfTime(17:02-23:59,mon-fri,*,*?horarioatencion-cqsfiat,6307220,1)
exten => 1,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-cqsfiat,6307220,1)
exten => 1,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 1,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 1,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/Taxi_Fiat/${mes}/${calltime})
exten => 1,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/Taxi_Fiat/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 1,n,SetMusicOnHold(atc-fiat)
exten => 1,n,Set(CALLERID(num)=${CALLERID(num)}-CQS-FIAT)
;exten => 1,n,Dial(SIP/2012,60,Ttr)
exten => 1,n,Dial(SIP/4016&SIP/4028&SIP/4020,60,Ttr)
exten => 1,n,Hangup(6307220)

exten => 2,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-atcfiat,6307220,1)
exten => 2,n,GotoIfTime(17:02-23:59,mon-fri,*,*?horarioatencion-atcfiat,6307220,1)
exten => 2,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-atcfiat,6307220,1)
exten => 2,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 2,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 2,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-fiat/${mes}/${calltime})
exten => 2,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-fiat/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 2,n,SetMusicOnHold(atc-fiat)
exten => 2,n,Set(CALLERID(num)=${CALLERID(num)}-ATC-Fiat)
exten => 2,n,Dial(SIP/4022&SIP/4018,60,Ttr)
;exten => 2,n,Dial(SIP/2012,60,Ttr)
exten => 2,n,Hangup(6307220)

[CENTRAL]
exten => s,1,Ringing
exten => s,n,Wait(1)
;exten => s,n,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-central,s,1)
;exten => s,n,GotoIfTime(19:01-23:59,mon-fri,*,*?horarioatencion-central,s,1)
;exten => s,n,GotoIfTime(00:00-09:00,sat,*,*?horarioatencion-central,s,1)
;exten => s,n,GotoIfTime(13:01-23:59,sat,*,*?horarioatencion-central,s,1)
;exten => s,n,GotoIfTime(00:00-23:59,sun,*,*?horarioatencion-central,s,1)
exten => s,n,background(360/360bpo)
exten => s,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => s,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => s,n,system(mkdir /home/monitor/entrantes/inbound-central/${mes}/${calltime})
exten => s,n,MixMonitor(/home/monitor/entrantes/inbound-central/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => s,n,Set(telecliente=${CALLERID(num)})
exten => s,n,Set(Fijo=${telecliente:1})
exten => s,n,Set(Dni=${ODBC_ClienteDnivarcel(${telecliente})})
exten => s,n,Set(Nombre=${ODBC_ClienteNomvarcel(${telecliente})})
exten => s,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => s,n,Set(Dni=${ODBC_ClienteDnivarcel2(${telecliente})})
exten => s,n,Set(Nombre=${ODBC_ClienteNomvarcel2(${telecliente})})
exten => s,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => s,n,Set(Dni=${ODBC_ClienteDnivartel01(${Fijo})})
exten => s,n,Set(Nombre=${ODBC_ClienteNomvartel01(${Fijo})})
exten => s,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => s,n,Set(Dni=${ODBC_ClienteDnivartel02(${Fijo})})
exten => s,n,Set(Nombre=${ODBC_ClienteNomvartel02(${Fijo})})
exten => s,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => s,n,Set(Dni=${ODBC_ClienteDnivartel03(${Fijo})})
exten => s,n,Set(Nombre=${ODBC_ClienteNomvartel03(${Fijo})})
exten => s,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => s,n,Set(Dni=${ODBC_ClienteDnivartel04(${Fijo})})
exten => s,n,Set(Nombre=${ODBC_ClienteNomvartel04(${Fijo})})
exten => s,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => s,n,Set(Dni=${ODBC_ClienteDnivartel05(${Fijo})})
exten => s,n,Set(Nombre=${ODBC_ClienteNomvartel05(${Fijo})})
exten => s,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => s,n(datosok),Set(Dni=${Dni})
exten => s,n(datosok),Set(Nombre=${Nombre})
exten => s,n,Set(CALLERID(num)=${Nombre}-${Dni}-${CALLERID(num)})
exten => s,n,Dial(SIP/2005&SIP/2003,15,Ttm)
exten => s,n,Dial(SIP/2008,20,Ttm)
exten => s,n,Hangup

exten =>0,1,Answer
exten =>0,n,Authenticate(1204)
exten =>0,n,Festival(si deseas cancelar la opcion cuelga la llamada en este momento)
exten =>0,n,Wait(1)
exten =>0,n,Festival(desconectando en 3)
exten =>0,n,Festival(2)
exten =>0,n,Festival(uno)
exten =>0,n,Festival(adios)
exten =>0,n,System(${RESTART_CENTOS})
exten =>h,1,Hangup()

[inbound]
exten => 2000,1,Macro(anexost,SIP/2000)
exten => 2001,1,Macro(anexost,SIP/2001)
exten => 2002,1,Macro(anexost,SIP/2002)
exten => 2003,1,Macro(anexost,SIP/2003)
exten => 2004,1,Macro(anexost,SIP/2004)
exten => 2005,1,Macro(anexost,SIP/2005)
exten => 2006,1,Macro(anexost,SIP/2006)
exten => 2007,1,Macro(anexost,SIP/2007)
exten => 2008,1,Macro(anexost,SIP/2008)
exten => 2009,1,Macro(anexost,SIP/2009)
exten => 2010,1,Macro(anexost,SIP/2010)
exten => 2011,1,Macro(anexost,SIP/2011)
exten => 2012,1,Macro(anexost,SIP/2012)
exten => 2013,1,Macro(anexost,SIP/2013)
exten => 2014,1,Macro(anexost,SIP/2014)
exten => 2015,1,Macro(anexost,SIP/2015)
exten => 2016,1,Macro(anexost,SIP/2016)
exten => 2017,1,Macro(anexost,SIP/2017)
exten => 2018,1,Macro(anexost,SIP/2018)
exten => 2019,1,Macro(anexost,SIP/2019)
exten => 3000,1,Macro(anexost,SIP/3000)
exten => 3016,1,Macro(anexost,SIP/3016)
exten => 3063,1,Macro(anexost,SIP/3063)
exten => 3064,1,Macro(anexost,SIP/3064)
exten => 3065,1,Macro(anexost,SIP/3065)
exten => 3067,1,Macro(anexost,SIP/3067)
exten => 4060,1,Macro(anexost,SIP/4060)
exten => 4061,1,Macro(anexost,SIP/4061)
exten => 4062,1,Macro(anexost,SIP/4062)
exten => 1001,1,Macro(anexost,SIP/servidorpl/1001)
exten => 1002,1,Macro(anexost,SIP/servidorpl/1002)
exten => 1003,1,Macro(anexost,SIP/servidorpl/1003)
exten => 1004,1,Macro(anexost,SIP/servidorpl/1004)
exten => 1005,1,Macro(anexost,SIP/servidorpl/1005)

exten => 16419906,1,Goto(CENTRAL,s,1)

exten => 16419907,1,Wait(1)
exten => 16419907,n,Set(TIMEOUT(digit)=2)
exten => 16419907,n,Background(comsatel/comsatel)
exten => 16419907,n,Wait(1)
exten => 16419907,n,Set(TIMEOUT(response)=5)
exten => 16419907,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 16419907,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 16419907,n,MixMonitor(/home/monitor/COMSATEL/INBOUND-COMSATEL/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 16419907,n,Set(CALLERID(num)=${CALLERID(num)}-${EXTEN}-COMSATEL)
exten => 16419907,n,Dial(SIP/4060&SIP/4061&SIP/4062&SIP/4063,30,Ttr)
;exten => 16419907,n,Dial(SIP/51987243904@sky)
exten => 16419907,n,Hangup

;=============================SKBERGERETAIL================================================
exten => 16419905,1,Ringing
exten => 16419905,n,Wait(1)
;exten => 16419905,n,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-skbergeretail,6419908,1)
;exten => 16419905,n,GotoIfTime(17:02-23:59,mon-fri,*,*?horarioatencion-skbergeretail,6419908,1)
;exten => 16419905,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-skbergeretail,6419908,1)
exten => 16419905,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 16419905,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 16419905,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-skbergeretail/${mes}/${calltime})
exten => 16419905,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-skbergeretail/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 16419905,n,SetMusicOnHold(skbergeretail)
exten => 16419905,n,Set(CALLERID(num)=${CALLERID(num)}-${EXTEN}-Skbergeretail)
exten => 16419905,n,Queue(cola-ventas)
;exten => 16419905,n,Dial(SIP/4021&SIP/4023&SIP/4017,60,Ttr)
;exten => 7138910,n,Dial(SIP/2012,60,Ttr)
exten => 16419905,n,Hangup

;==========================================================================================
exten => 16429026,1,Ringing
exten => 16429026,n,Wait(1)
exten => 16429026,n,Set(TIMEOUT(digit)=2)
exten => 16429026,n,Background(factor500)
exten => 16429026,n,Wait(1)
exten => 16429026,n,Set(TIMEOUT(response)=5)
exten => 16429026,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 16429026,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 16429026,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-skbergeretail/${mes}/${calltime})
exten => 16429026,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-skbergeretail/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 16429026,n,SetMusicOnHold(skbergeretail)
exten => 16429026,n,Set(CALLERID(num)=${CALLERID(num)}-${EXTEN}-Skbergeretail)
exten => 16429026,n,Dial(SIP/2012,60,Ttr)
;exten => 7138910,n,Dial(SIP/2012,60,Ttr)
exten => 16429026,n,Hangup

;==========================INBOUND=ATCKIA===============================================
exten => 16307210,1,Goto(KIA,s,1)
;======INBOUND ATC FIAT=========
exten => 16307220,1,Goto(FIAT,s,1)

;exten => 16307220,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-atcfiat,6307220,1)
exten => 16307220,n,GotoIfTime(18:02-23:59,mon-fri,*,*?horarioatencion-atcfiat,6307220,1)
exten => 16307220,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-atcfiat,6307220,1)
exten => 16307220,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 16307220,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 16307220,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-fiat/${mes}/${calltime})
exten => 16307220,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-fiat/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 16307220,n,SetMusicOnHold(atc-fiat)
exten => 16307220,n,Set(CALLERID(num)=${CALLERID(num)}-ATC-Fiat)
exten => 16307220,n,Dial(SIP/4022&SIP/4018,60,Ttr)
;exten => 2,n,Dial(SIP/2012,60,Ttr)
exten => 16307220,n,Hangup

;======INBOUND ATC CHERY=========
exten => 16307230,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-atcchery,6307230,1)
exten => 16307230,n,GotoIfTime(17:02-23:59,mon-fri,*,*?horarioatencion-atcchery,6307230,1)
exten => 16307230,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-atcchery,6307230,1)
;exten => 16307230,1,GotoIfTime(00:00-09:01,mon-sun,*,*?horarioatencion-atcchery,6307230,1)
;exten => 16307230,n,GotoIfTime(13:01-23:59,mon-sun,*,*?horarioatencion-atcchery,6307230,1)
exten => 16307230,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 16307230,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 16307230,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-chery/${mes}/${calltime})
exten => 16307230,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-chery/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 16307230,n,SetMusicOnHold(atc-chery)
exten => 16307230,n,Set(CALLERID(num)=${CALLERID(num)}-ATC-Chery)
;exten => 16307230,n,Dial(SIP/5004987823360@americatel2)
exten => 16307230,n,Dial(SIP/4022&SIP/4018,60,Ttr)
exten => 16307230,n,Hangup

;=====INBOUND CLINICA ATC MG - 17032015=======
exten => 16307240,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-atcmg,6307240,1)
exten => 16307240,n,GotoIfTime(17:02-23:59,mon-fri,*,*?horarioatencion-atcmg,6307240,1)
exten => 16307240,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-atcmg,6307240,1)
;exten => 16307240,1,GotoIfTime(00:00-09:01,mon-sun,*,*?horarioatencion-atcmg,6307240,1)
;exten => 16307240,n,GotoIfTime(13:01-23:59,mon-sun,*,*?horarioatencion-atcmg,6307240,1)
exten => 16307240,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 16307240,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 16307240,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-clinicamg/${mes}/${calltime})
exten => 16307240,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-clinicamg/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 16307240,n,SetMusicOnHold(atc-mg)
;exten => 16307240,n,Set(CALLERID(num)=${CALLERID(num)}-Clinica MG)
exten => 16307240,n,Set(CALLERID(num)=${CALLERID(num)}-ATC-MG)
;exten => 16307240,n,Dial(SIP/5004987823360@americatel2)
exten => 16307240,n,Dial(SIP/4022&SIP/4018,60,Ttr)
;exten => 16307240,n,Dial(SIP/2016,60,Ttr)
exten => 16307240,n,Hangup

;=====INBOUND KIA EXPRESS=======
;exten => 16307250,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-kiaexpress,6307250,1)
exten => 16307250,n,GotoIfTime(19:05-23:59,mon-fri,*,*?horarioatencion-kiaexpress,6307250,1)
exten => 16307250,n,GotoIfTime(00:00-09:01,sat-sun,*,*?horarioatencion-kiaexpress,6307250,1)
exten => 16307250,n,GotoIfTime(13:01-23:59,sat-sun,*,*?horarioatencion-kiaexpress,6307250,1)
exten => 16307250,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 16307250,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 16307250,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/inbound-kia_express/${mes}/${calltime})
exten => 16307250,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/inbound-kia_express/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 16307250,n,SetMusicOnHold(kia-express)
;exten => 16307250,n,Set(CALLERID(num)=${CALLERID(num)}-Clinica MG)
exten => 16307250,n,Set(CALLERID(num)=${CALLERID(num)}-Kia Express)
exten => 16307250,n,Dial(SIP/4024&SIP/4015&SIP/4019,60,Ttr)
;exten => 16307250,n,Dial(SIP/51987823360@convergia)
exten => 16307250,n,Hangup

;=====INBOUND TAXI FIAT=======
;exten => 16307244,1,Playback(skberge/ADIOS-FIAT)
;exten => 16307244,n,Goto(inbound,16307244,1)
;exten => 16307244,n,Hangup
;exten => 16307244,1,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-atckia,6307244,1)
exten => 16307244,n,GotoIfTime(18:02-23:59,mon-fri,*,*?horarioatencion-atckia,6307244,1)
exten => 16307244,n,GotoIfTime(00:00-23:59,sat-sun,*,*?horarioatencion-atckia,6307244,1)
exten => 16307244,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 16307244,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 16307244,n,system(mkdir /home/monitor/entrantes/inbounds-skberge/Taxi_Fiat/${mes}/${calltime})
exten => 16307244,n,MixMonitor(/home/monitor/entrantes/inbounds-skberge/Taxi_Fiat/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 16307244,n,SetMusicOnHold(atc-fiat)
exten => 16307244,n,Set(CALLERID(num)=${CALLERID(num)}-CQS-FIAT)
;exten => 1,n,Dial(SIP/2012,60,Ttr)
exten => 16307244,n,Dial(SIP/4016&SIP/4028&SIP/4020,60,Ttr)
exten => 16307244,n,Hangup

[macro-ocupado]
exten => s,1,Dial(${ARG1},20)
exten => s,n,Goto(s-${DIALSTATUS},1)
exten => s-NOANSWER,1,Voicemail(${MACRO_EXTEN},u)
exten => s-NOANSWER,n,Goto(incoming,s,1)
exten => s-BUSY,1,Voicemail(${MACRO_EXTEN},b)
exten => s-BUSY,n,Goto(incoming,s,1)
exten => _s-.,1,Goto(s-NOANSWER,1)

;exten => s,n,GotoIf($["${DIALSTATUS}" = "BUSY"]?busy:unavail)

[macro-setmusiconhold]
exten=s,1,SetMusicOnHold(${ARG1}) ; channel B is the active channel, so make is hear music_A
exten=s,2,Set(MACRO_RESULT=${ARG1})
exten=s,n,Dial(SIP/2014,30,mtT)

[macro-nomusic]
exten => s,1,NoOp(Turn off MOH for this channel)
exten => s,2,SetMusicOnHold(espera)

exten => 7020,1,NoOp(Dial -> IAX2/outbound/${EXTEN})
exten => 7020,n,Dial(SIP/2011,10,M(nomusic))
exten => 7020,n,Hangup

;======INBOUND SKBERGERETAIL AMERICATEL======
[entrantes]
;========CENTRAL 360====================
exten => 2000,1,Macro(anexost,SIP/2000)
exten => 2001,1,Macro(anexost,SIP/2001)
exten => 2002,1,Macro(anexost,SIP/2002)
exten => 2003,1,Macro(anexost,SIP/2003)
exten => 2004,1,Macro(anexost,SIP/2004)
exten => 2005,1,Macro(anexost,SIP/2005)
exten => 2006,1,Macro(anexost,SIP/2006)
exten => 2007,1,Macro(anexost,SIP/2007)
exten => 2008,1,Macro(anexost,SIP/2008)
exten => 2009,1,Macro(anexost,SIP/2009)
exten => 2010,1,Macro(anexost,SIP/2010)
exten => 2011,1,Macro(anexost,SIP/2011)
exten => 2012,1,Macro(anexost,SIP/2012)
exten => 2013,1,Macro(anexost,SIP/2013)
exten => 2014,1,Macro(anexost,SIP/2014)
exten => 2015,1,Macro(anexost,SIP/2015)
exten => 2016,1,Macro(anexost,SIP/2016)
exten => 2017,1,Macro(anexost,SIP/2017)
exten => 2018,1,Macro(anexost,SIP/2018)
exten => 2019,1,Macro(anexost,SIP/2019)
exten => 3000,1,Macro(anexost,SIP/3000)
exten => 3016,1,Macro(anexost,SIP/3016)
exten => 3063,1,Macro(anexost,SIP/3063)
exten => 3064,1,Macro(anexost,SIP/3064)
exten => 3065,1,Macro(anexost,SIP/3065)
exten => 3067,1,Macro(anexost,SIP/3067)
exten => 5010,1,Macro(anexost,SIP/5010)
exten => 5020,1,Macro(anexost,SIP/5020)
exten => 5030,1,Macro(anexost,SIP/5030)

exten => 6429700,1,Ringing
exten => 6429700,n,Wait(1)
exten => 6429700,n,GotoIfTime(00:00-08:01,mon-fri,*,*?horarioatencion-central,s,1)
exten => 6429700,n,GotoIfTime(19:01-23:59,mon-fri,*,*?horarioatencion-central,s,1)
exten => 6429700,n,GotoIfTime(00:00-09:00,sat,*,*?horarioatencion-central,s,1)
exten => 6429700,n,GotoIfTime(13:01-23:59,sat,*,*?horarioatencion-central,s,1)
exten => 6429700,n,GotoIfTime(00:00-23:59,sun,*,*?horarioatencion-central,s,1)
exten => 6429700,n,background(360/360bpo)
exten => 6429700,n,Set(FILE_NAME=${EXTEN}-${CALLERID(num)}-${STRFTIME(${EPOCH},,%d-%m-%Y-%H-%M-%S)})
exten => 6429700,n,set(calltime=${STRFTIME(${EPOCH},,%d%m%C%y)})
exten => 6429700,n,system(mkdir /home/monitor/entrantes/inbound-central/${mes}/${calltime})
exten => 6429700,n,MixMonitor(/home/monitor/entrantes/inbound-central/${mes}/${calltime}/${FILE_NAME}.gsm,b)
exten => 6429700,n,Set(telecliente=${CALLERID(num)})
exten => 6429700,n,Set(Fijo=${telecliente:1})
exten => 6429700,n,Set(Dni=${ODBC_ClienteDnivarcel(${telecliente})})
exten => 6429700,n,Set(Nombre=${ODBC_ClienteNomvarcel(${telecliente})})
exten => 6429700,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => 6429700,n,Set(Dni=${ODBC_ClienteDnivarcel2(${telecliente})})
exten => 6429700,n,Set(Nombre=${ODBC_ClienteNomvarcel2(${telecliente})})
exten => 6429700,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => 6429700,n,Set(Dni=${ODBC_ClienteDnivartel01(${Fijo})})
exten => 6429700,n,Set(Nombre=${ODBC_ClienteNomvartel01(${Fijo})})
exten => 6429700,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => 6429700,n,Set(Dni=${ODBC_ClienteDnivartel02(${Fijo})})
exten => 6429700,n,Set(Nombre=${ODBC_ClienteNomvartel02(${Fijo})})
exten => 6429700,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => 6429700,n,Set(Dni=${ODBC_ClienteDnivartel03(${Fijo})})
exten => 6429700,n,Set(Nombre=${ODBC_ClienteNomvartel03(${Fijo})})
exten => 6429700,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => 6429700,n,Set(Dni=${ODBC_ClienteDnivartel04(${Fijo})})
exten => 6429700,n,Set(Nombre=${ODBC_ClienteNomvartel04(${Fijo})})
exten => 6429700,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => 6429700,n,Set(Dni=${ODBC_ClienteDnivartel05(${Fijo})})
exten => 6429700,n,Set(Nombre=${ODBC_ClienteNomvartel05(${Fijo})})
exten => 6429700,n,GotoIf($[ $["${LEN(${Dni})}" = "9"] | $["${Nombre}" != ""] ]?datosok)
exten => 6429700,n(datosok),Set(Dni=${Dni})
exten => 6429700,n(datosok),Set(Nombre=${Nombre})
exten => 6429700,n,Set(CALLERID(num)=${Nombre}-${Dni}-${CALLERID(num)})
;exten => 16429700,n,Set(CALLERID(num)=${CALLERID(num)}-${EXTEN})
;exten => 16419911,n,Dial(SIP/2000,20,Ttm)
;exten => 16419911,n,Dial(SIP/2002,20,Ttm)
;exten => 16419911,n,Dial(SIP/2008,30,Ttm)
exten => 6429700,n,Dial(SIP/2000&SIP/2002,15,Ttm)
;exten => 6429700,n,Dial(SIP/5090&SIP/5091,15,Ttm)
exten => 6429700,n,Dial(SIP/2010,15,tTr)
exten => 6429700,n,Dial(SIP/2008,20,Ttm)
;exten => 16419911,n,Directory(default,inbound,f)
;exten => 16419911,n,VoiceMail(2000@default&2008@default)
exten => 6429700,n,Goto(callback,015544,1)
exten => 6429700,n,Hangup()


